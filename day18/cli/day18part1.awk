{s="("$0")"; s2=""; while(s2!=s) { s2=s; while(match(s,"\\([0-9]+\\)")) { e = substr(s,RSTART, RLENGTH); e=substr(e,2,length(e)-2);s = substr(s,1,RSTART-1) e substr(s,RSTART+RLENGTH)} if(match(s,"[0-9]+ [+*] [0-9]+")) { e = substr(s,RSTART, RLENGTH); split(e,ee); if(ee[2]=="*") e=ee[1]*ee[3]; else e=ee[1]+ee[3]; s = substr(s,1,RSTART-1) e substr(s,RSTART+RLENGTH)} } t+=s } END {print t}
