{s="("$0")"; s2=""; while(s2!=s) { s2=s; while(match(s,"[0-9]+ \\+ [0-9]+")) { e = substr(s,RSTART, RLENGTH); split(e,ee); e=ee[1]+ee[3]; s = substr(s,1,RSTART-1) e substr(s,RSTART+RLENGTH) } while(match(s,"\\([0-9* ]+\\)")) { e = substr(s,RSTART, RLENGTH); e=substr(e,2,length(e)-2);split(e,ee," \\* "); p=1; for(x in ee) {p*=ee[x]};s = substr(s,1,RSTART-1) p substr(s,RSTART+RLENGTH)} } t+=s } END {print t}
